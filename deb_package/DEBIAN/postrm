#!/bin/bash

cat /etc/passwd | grep '/home/' | \
grep -v 'cups\|syslog' | cut -d ':' -f 6 > /tmp/homes.list

function rmLaunch {
    rm -rf "$BASEDIR/.config/menus/applications-merged/$1.menu"
    rm -rf "$BASEDIR/.local/share/applications/$1.desktop"
    rm -rf "$BASEDIR/Desktop/$1.desktop"
}

while read BASEDIR; do
    USUARIO=basename $BASEDIR
    
    rmLaunch "org.kde.step"
    rmLaunch "geogebra-classic"
    rmLaunch "wxMaxima"
    rmLaunch "gresistor"
    rmLaunch "avogadro"
    rmLaunch "gchem3d-0.14"
    rmLaunch "gchemcalc-0.14"
    rmLaunch "gchempaint-0.14"
    rmLaunch "gelemental"
    rmLaunch "gspectrum-0.14"
    rmLaunch "gchemtable-0.14"
    rmLaunch "org.kde.marble.maps"
    rmLaunch "org.kde.marble-qt"
    rmLaunch "klavaro"
    rmLaunch "scratch"
    rmLaunch "logisim"
    rmLaunch "stellarium"

    runuser -l $USUARIO -c "rm -rf /home/$USUARIO/.cache/"
    if [ -f /usr/bin/lxpanelctl ]; then
        su - $USUARIO -c "lxpanelctl restart"
    fi
done < /tmp/homes.list